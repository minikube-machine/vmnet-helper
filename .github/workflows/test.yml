name: Test Installer Script

on:
  # Allows you to run this workflow manually from the Actions tab
  workflow_dispatch:
    # Runs on pushes or pull requests targeting the main branch
  push:
    branches: [ "main" ]
  # Runs on a schedule
  schedule:
    # ‚è∞ Runs every 4 hours
    - cron: '0 */4 * * *'

jobs:
  test-installation:
    # Job name will dynamically include the OS version
    name: Test on macOS ${{ matrix.os }}
    
    # Use a matrix strategy to run the job on multiple OS versions
    strategy:
      matrix:
        os: [macos-13, macos-15]
        
    # Specify the runner from the matrix
    runs-on: ${{ matrix.os }}

    steps:
      - name: üì• Download and Install vmnet-helper
        continue-on-error: true
        run: |
          set -x
          curl -fsSL https://github.com/minikube-machine/vmnet-helper/releases/latest/download/install.sh | sudo bash
          echo $?
      - name: ‚úÖ Verify vmnet-helper Version
        run: /opt/vmnet-helper/bin/vmnet-helper --version
